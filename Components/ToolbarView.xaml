<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:LunaDraw.Logic.ViewModels"
             xmlns:tools="clr-namespace:LunaDraw.Logic.Tools"
             xmlns:conv="clr-namespace:LunaDraw.Converters"
             x:Class="LunaDraw.Views.ToolbarView"
             x:DataType="viewModels:ToolbarViewModel">
        <ContentView.Resources>
                <ResourceDictionary>
                        <conv:ToolNameToIconConverter x:Key="ToolNameToIconConverter"/>
                </ResourceDictionary>
        </ContentView.Resources>

        <ScrollView Orientation="Vertical"
                    WidthRequest="80"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}">
                <VerticalStackLayout Spacing="5"
                                     Padding="0">

                        <CollectionView ItemsSource="{Binding AvailableTools}"
                                        SelectionMode="None"
                                        ItemSizingStrategy="MeasureAllItems"
                                        HorizontalOptions="Center">
                                <CollectionView.ItemsLayout>
                                        <LinearItemsLayout Orientation="Vertical"
                                                           ItemSpacing="3"/>
                                </CollectionView.ItemsLayout>
                                <CollectionView.ItemTemplate>
                                        <DataTemplate x:DataType="tools:IDrawingTool">
                                            <Grid HorizontalOptions="Center">
                                                <Button Clicked="OnToolButtonClicked"
                                                        WidthRequest="56"
                                                        HeightRequest="56"
                                                        Padding="8"
                                                        Text="{Binding Name, Converter={StaticResource ToolNameToIconConverter}}"
                                                        FontSize="20"
                                                        AutomationProperties.Name="{Binding Name}"/>
                                            </Grid>
                                        </DataTemplate>
                                </CollectionView.ItemTemplate>
                        </CollectionView>

                        <BoxView HeightRequest="2"
                                 Color="Gray"
                                 Margin="0,5"/>

                        <Button Clicked="OnStrokeColorButtonClicked"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸŽ¨"
                                FontSize="20"
                                AutomationProperties.Name="Stroke Color"/>

                        <Button Clicked="OnStrokeWidthButtonClicked"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="â†•"
                                FontSize="20"
                                AutomationProperties.Name="Stroke Width"/>

                        <Button Clicked="OnFillColorButtonClicked"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸª£"
                                FontSize="20"
                                AutomationProperties.Name="Fill Color"/>

                        <Button Clicked="OnOpacityButtonClicked"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="â—"
                                FontSize="20"
                                AutomationProperties.Name="Opacity"/>

                        <BoxView HeightRequest="2"
                                 Color="Gray"
                                 Margin="0,5"/>

                        <Button Command="{Binding UndoCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="â†º"
                                FontSize="20"
                                AutomationProperties.Name="Undo"/>
                        <Button Command="{Binding RedoCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="â†»"
                                FontSize="20"
                                AutomationProperties.Name="Redo"/>

                        <BoxView HeightRequest="2"
                                 Color="Gray"
                                 Margin="0,5"/>

                        <Button Command="{Binding CopyCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸ“‹"
                                FontSize="20"
                                AutomationProperties.Name="Copy"/>
                        <Button Command="{Binding PasteCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸ“¥"
                                FontSize="20"
                                AutomationProperties.Name="Paste"/>
                        <Button Command="{Binding DeleteSelectedCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸ—‘ï¸"
                                FontSize="20"
                                AutomationProperties.Name="Delete"/>

                        <BoxView HeightRequest="2"
                                 Color="Gray"
                                 Margin="0,5"/>

                        <Button Command="{Binding GroupSelectedCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸ—‚ï¸"
                                FontSize="20"
                                AutomationProperties.Name="Group"/>
                        <Button Command="{Binding UngroupSelectedCommand}"
                                WidthRequest="56"
                                HeightRequest="56"
                                Padding="8"
                                Text="ðŸ“‚"
                                FontSize="20"
                                AutomationProperties.Name="Ungroup"/>

                </VerticalStackLayout>
        </ScrollView>

</ContentView>
