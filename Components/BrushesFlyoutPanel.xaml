<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:LunaDraw.Logic.ViewModels"
             xmlns:models="clr-namespace:LunaDraw.Logic.Models"
             xmlns:components="clr-namespace:LunaDraw.Components"
             x:Class="LunaDraw.Components.BrushesFlyoutPanel"
             x:DataType="viewModels:ToolbarViewModel">
  <Border Background="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray800}}"
          Padding="12"
          StrokeShape="RoundRectangle"
          Stroke="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
          StrokeThickness="1">
    <StackLayout Spacing="10">
      <Label Text="Choose a Brush"
             FontAttributes="Bold"
             FontSize="16"
             HorizontalTextAlignment="Center"/>

      <BoxView HeightRequest="1"
               Color="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
               Margin="0,5"/>
               
      <ScrollView Orientation="Horizontal" HorizontalScrollBarVisibility="Never">
          <StackLayout BindableLayout.ItemsSource="{Binding AvailableBrushShapes}"
                       Orientation="Horizontal"
                       Spacing="10"
                       HorizontalOptions="Center">
            <BindableLayout.ItemTemplate>
              <DataTemplate x:DataType="models:BrushShape">
                <StackLayout>
                    <Border StrokeShape="RoundRectangle 10"
                            StrokeThickness="1"
                            Stroke="Gray"
                            WidthRequest="60"
                            HeightRequest="60"
                            Padding="0">
                         <Border.GestureRecognizers>
                             <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:ToolbarViewModel}}, Path=SelectBrushShapeCommand}"
                                                   CommandParameter="{Binding .}"/>
                         </Border.GestureRecognizers>
                         <components:BrushPreviewControl BrushShape="{Binding .}"
                                                         Color="{AppThemeBinding Light=Black, Dark=White}"
                                                         HorizontalOptions="Fill"
                                                         VerticalOptions="Fill"/>
                    </Border>
                    <Label Text="{Binding Name}"
                           FontSize="12"
                           HorizontalTextAlignment="Center"
                           LineBreakMode="TailTruncation"/>
                </StackLayout>
              </DataTemplate>
            </BindableLayout.ItemTemplate>
          </StackLayout>
      </ScrollView>
    </StackLayout>
  </Border>
</ContentView>
